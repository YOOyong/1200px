{% extends "base.html" %}

{% block contents %}

<h1>프로필 임시</h1>
{% if object.profile_image %}
<img src="{{ object.profile_image.url }}" alt="">
{%endif%}

<!-- 자기자신이 아니면 팔로우 버튼 출력 -->
{% if request.user.is_authenticated and request.user != object.user %}
<div class="text-center">

    {% if is_follow %}
    <form method="POST" action="{% url 'follow' %}">
        {% csrf_token %}
        <input type="hidden" name='follow_to' , value="{{ object.user }}">
        <button type="submit" class="btn btn-primary">언팔로우</button>
    </form>
    {% else %}
    <form method="POST" action="{% url 'follow' %}">
        {% csrf_token %}
        <input type="hidden" name='follow_to' , value="{{ object.user }}">
        <button type="submit" class="btn btn-primary">팔로우</button>
    </form>
    {% endif %}
<div>
{% endif%}

        <div class="row justify-content-md-center mt-5">

            <div class="card border-secondary col-md-3">

                <div class="card-title">
                    프로필 임시
                </div>
                <div class="card-body">
                    <p> {{ object.user }} </p>
                    <p> {{ object.state_message }}</p>

                    <p> '이 사람이' 팔로우 하는 사람 리스트 </p>
                    {% for following in object.user.following.all %}
                    <p> {{ following }}</p>
                    {% endfor%}
                    <i>{{ total_following }} 명</i>

                    <br>

                    <p> '이 사람을' 팔로우 하는 사람 리스트 </p>
                    {% for follower in object.user.followers.all %}
                    <p> {{ follower }}</p>
                    {% endfor%}
                    <i>{{ total_followers }} 명</i>

                </div>
            </div>
        </div>
        {% if request.user == object.user %}
        <a href="{% url 'users:profile_update' object.user.username %}" class="btn btn-primary">수정하기</a>
        {% endif %}
        {% endblock %}